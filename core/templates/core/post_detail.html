{% extends "base.html" %}

{% block title %}{{ post.title }} | Feijoada Week{% endblock %}

{% block content %}
      <!-- Botão de Voltar -->
      <div class="mb-8">
        <a href="{% url 'home' %}" class="text-blue-600 hover:underline text-sm">&larr; Voltar</a>
      </div>

      <!-- Título do Post -->
      <h1 class="text-4xl md:text-5xl font-bold leading-tight text-gray-900 mb-4">
        {{ post.title }}
      </h1>

      <!-- Data de Publicação -->
      <div class="mt-6 text-sm text-gray-500">
        Publicado em: {{ post.published_at|date:"d/m/Y H:i" }}
      </div>

      <!-- if post.imagem exists -->
      {% if post.imagem %}
        <div class="mt-6 mb-12">
          <img src="{{ post.imagem }}" alt="{{ post.title }}" class="w-full rounded-lg shadow-md">
        </div>
      {% endif %}

      <!-- Conteúdo -->
      <div class="prose prose-lg max-w-none mt-6">
        {{ post.content|safe|linebreaks }}
      </div>

      <!-- Botão de Voltar (duplicado no fim) -->
      <div class="mt-10">
        <a href="{% url 'home' %}" class="text-blue-600 hover:underline text-sm">&larr; Voltar</a>
      </div>

      {% load comments %}
      <hr />
      {% render_comment_list for post %}
      <hr />

      {% if request.GET.status == "comment_submitted" %}
        <div class="alert alert-info">Seu comentário foi enviado e aguarda moderação.</div>
      {% endif %}

      {% get_comment_form for post as form %}
        <form action="{% comment_form_target %}" method="post">
          {% csrf_token %}
          {{ form.as_p }}

          <!-- redireciona de volta para a página do post (com âncora #comments, opcional) -->
          <input type="hidden" name="next" value="{{ post.get_absolute_url }}?status=comment_submitted#comments">

          <button type="submit">Enviar comentário</button>
        </form>

      {% endblock %}
